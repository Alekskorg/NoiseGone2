<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NoiseGone ‚Äî –û—á–∏—Å—Ç–∫–∞ –∑–≤—É–∫–∞</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg1: #e0ecff;
      --bg2: #f5f5ff;
      --brand: #28a745;
      --text: #222;
      --muted: #666;
      --card: #ffffff;
      --border: #d0d7de;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: flex; align-items: center; justify-content: center;
      background: linear-gradient(to right, var(--bg1), var(--bg2));
      padding: 24px;
      color: var(--text);
    }
    .container {
      background: var(--card);
      width: min(440px, 100%);
      border-radius: 20px;
      padding: 32px 28px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      position: relative;
      text-align: center;
    }
    .language-switcher {
      position: absolute; top: 14px; right: 14px;
      border: 1px solid var(--border);
      background: #fff;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      user-select: none;
    }
    .logo { height: 48px; margin-bottom: 12px; }
    h1 { font-size: 24px; margin: 8px 0 4px; }
    .desc { color: var(--muted); margin: 0 0 16px; }
    .dropzone {
      border: 2px dashed var(--border);
      border-radius: 14px;
      padding: 18px;
      cursor: pointer;
      transition: .2s;
    }
    .dropzone:hover { background: #fafcff; }
    .dropzone.dragover { background: #f3f7ff; border-color: #9bb6ff; }
    .file-name { margin-top: 8px; font-size: 14px; color: #444; word-break: break-all; }
    .btn {
      margin-top: 14px;
      background: var(--brand); color: #fff; border: none;
      padding: 12px 18px; border-radius: 10px;
      font-size: 16px; cursor: pointer;
    }
    .btn[disabled] { opacity: .6; cursor: not-allowed; }
    .progress { display: none; margin-top: 16px; text-align: left; }
    .progress-bar {
      height: 6px; background: #ddd; border-radius: 10px; overflow: hidden;
    }
    .progress-bar > span {
      display: block; height: 100%; width: 0%;
      background: var(--brand); transition: width .2s ease;
    }
    .status { margin: 8px 0 0; font-size: 14px; color: var(--muted); }
    .done { display: none; margin-top: 16px; color: #1f7a3c; }
    .download { margin-left: 6px; text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <button class="language-switcher" type="button" aria-label="Switch language">EN</button>

    <img src="logo.png" alt="NoiseGone" class="logo" />
    <h1 data-i18n="heading">NoiseGone</h1>
    <p class="desc" data-i18n="description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª, –∏ –º—ã —É–¥–∞–ª–∏–º —à—É–º</p>

    <label class="dropzone" id="dropzone" for="fileInput" aria-label="File drop area">
      <strong id="chooseText" data-i18n="chooseFile">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—É–¥–∏–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å</strong>
      <div class="file-name" id="fileName"></div>
      <input type="file" id="fileInput" accept="audio/*" hidden />
    </label>

    <button class="btn" id="processBtn" type="button" data-i18n="button" disabled>–û—á–∏—Å—Ç–∏—Ç—å —à—É–º</button>

    <div class="progress" id="progressContainer" aria-live="polite">
      <div class="progress-bar"><span id="progressFill"></span></div>
      <p class="status" id="status"></p>
    </div>

    <p class="done" id="doneMessage">
      ‚úÖ <span data-i18n="done">–®—É–º —É–¥–∞–ª—ë–Ω!</span>
      <a id="downloadLink" class="download" href="#" download>
        ‚¨áÔ∏è <span data-i18n="download">–°–∫–∞—á–∞—Ç—å –æ—á–∏—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª</span>
      </a>
    </p>
  </div>

  <script>
    // i18n
    const T = {
      ru: {
        heading: "NoiseGone",
        description: "–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª, –∏ –º—ã —É–¥–∞–ª–∏–º —à—É–º",
        chooseFile: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—É–¥–∏–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å",
        button: "–û—á–∏—Å—Ç–∏—Ç—å —à—É–º",
        processing: "–ò–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞...",
        done: "–®—É–º —É–¥–∞–ª—ë–Ω!",
        download: "–°–∫–∞—á–∞—Ç—å –æ—á–∏—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª",
        switch: "EN"
      },
      en: {
        heading: "NoiseGone",
        description: "Upload an audio file and we'll remove the noise",
        chooseFile: "Drag & drop audio here or click to choose",
        button: "Clean noise",
        processing: "Processing...",
        done: "Noise removed!",
        download: "Download cleaned file",
        switch: "RU"
      }
    };

    let lang = "ru";
    let selectedFile = null;

    const els = {
      switcher: document.querySelector(".language-switcher"),
      heading: document.querySelector('[data-i18n="heading"]'),
      desc: document.querySelector('[data-i18n="description"]'),
      choose: document.getElementById("chooseText"),
      input: document.getElementById("fileInput"),
      dropzone: document.getElementById("dropzone"),
      fileName: document.getElementById("fileName"),
      btn: document.getElementById("processBtn"),
      progress: document.getElementById("progressContainer"),
      fill: document.getElementById("progressFill"),
      status: document.getElementById("status"),
      done: document.getElementById("doneMessage"),
      download: document.getElementById("downloadLink")
    };

    function applyLang() {
      const L = T[lang];
      document.documentElement.lang = lang;
      els.switcher.textContent = L.switch;
      els.heading.textContent = L.heading;
      els.desc.textContent = L.description;
      els.choose.textContent = L.chooseFile;
      els.btn.textContent = L.button;

      // –ï—Å–ª–∏ –∏–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –æ–±–Ω–æ–≤–∏–º –ø–æ–¥–ø–∏—Å–∏
      if (els.progress.style.display !== "none" && els.status.textContent) {
        els.status.textContent = L.processing;
      }
      if (els.done.style.display !== "none") {
        els.done.querySelector('[data-i18n="done"]').textContent = L.done;
        els.download.querySelector('[data-i18n="download"]').textContent = L.download;
      }
    }

    els.switcher.addEventListener("click", () => {
      lang = lang === "ru" ? "en" : "ru";
      applyLang();
    });

    // File handling
    els.input.addEventListener("change", handleFileSelect);

    function handleFileSelect() {
      if (els.input.files && els.input.files.length) {
        selectedFile = els.input.files[0];
        els.fileName.textContent = "üìé " + selectedFile.name;
        els.btn.disabled = false;
        els.done.style.display = "none";
      }
    }

    // Drag & Drop
    ["dragenter", "dragover"].forEach(ev => {
      els.dropzone.addEventListener(ev, e => {
        e.preventDefault(); e.stopPropagation();
        els.dropzone.classList.add("dragover");
      });
    });
    ["dragleave", "drop"].forEach(ev => {
      els.dropzone.addEventListener(ev, e => {
        e.preventDefault(); e.stopPropagation();
        els.dropzone.classList.remove("dragover");
      });
    });
    els.dropzone.addEventListener("drop", e => {
      const files = e.dataTransfer.files;
      if (files && files.length) {
        selectedFile = files[0];
        els.input.files = files; // —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å input
        els.fileName.textContent = "üìé " + selectedFile.name;
        els.btn.disabled = false;
        els.done.style.display = "none";
      }
    });
    els.dropzone.addEventListener("click", () => els.input.click());

    // Processing simulation
    els.btn.addEventListener("click", startProcessing);

    function startProcessing() {
      if (!selectedFile) return;

      els.progress.style.display = "block";
      els.status.textContent = T[lang].processing;
      els.fill.style.width = "0%";
      els.done.style.display = "none";

      let p = 0;
      const timer = setInterval(() => {
        p += 3 + Math.random() * 4;
        if (p >= 100) {
          p = 100;
          clearInterval(timer);
          finishProcessing();
        }
        els.fill.style.width = p + "%";
      }, 80);
    }

    function finishProcessing() {
      // TODO: –∑–¥–µ—Å—å –≤—ã–∑–æ–≤–∏—Ç–µ —Å–≤–æ–π backend –∏ –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
      // –î–ª—è –¥–µ–º–æ ‚Äî –¥–∞—ë–º —Å–∫–∞—á–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫ –ø–æ–¥ –Ω–æ–≤—ã–º –∏–º–µ–Ω–µ–º.
      const L = T[lang];
      els.progress.style.display = "none";
      els.done.style.display = "block";

      const url = URL.createObjectURL(selectedFile);
      const base = selectedFile.name.replace(/(\.[^.]*)?$/, "");
      const ext = selectedFile.name.match(/\.[^.]+$/)?.[0] || ".wav";
      els.download.href = url;
      els.download.download = base + "_cleaned" + ext;

      els.done.querySelector('[data-i18n="done"]').textContent = L.done;
      els.download.querySelector('[data-i18n="download"]').textContent = L.download;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    applyLang();
  </script>
</body>
</html>

 
