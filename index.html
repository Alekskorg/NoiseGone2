<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NoiseGone ‚Äî –û—á–∏—Å—Ç–∫–∞ –∑–≤—É–∫–∞</title>
  <link rel="icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg1:#eef4ff; --bg2:#f7f7ff; --card:#fff;
      --text:#0f172a; --muted:#64748b; --border:#e2e8f0;
      --brand:#22c55e; --brand-600:#16a34a;
      --shadow:0 10px 40px rgba(2,6,23,.10);
      --radius:22px;
    }
    *,*:before,*:after{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:Inter,system-ui,ui-sans-serif,Arial;
      background:radial-gradient(1200px 600px at 20% 0%,var(--bg1),transparent) no-repeat,
                 linear-gradient(180deg,var(--bg2),#fff);
      display:flex;align-items:center;justify-content:center;
      padding:32px;color:var(--text);
    }
    .card{
      width:min(440px,100%);
      background:var(--card); border-radius:var(--radius);
      padding:32px 28px; box-shadow:var(--shadow); text-align:center;
      position:relative;
    }
    .lang{position:absolute;top:14px;right:14px}
    .chip{
      border:1px solid var(--border); background:#fff;
      padding:6px 12px; border-radius:999px; font-size:13px;
      cursor:pointer; user-select:none;
      box-shadow:0 2px 6px rgba(2,6,23,.06);
    }
    .logo{height:54px; margin-bottom:8px}
    h1{font-size:26px; margin:6px 0 2px; letter-spacing:.2px}
    .desc{color:var(--muted); margin:0 0 18px; text-decoration:none}
    /* —É–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–Ω–∏—è/–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è */
    .card *{text-decoration:none}

    .dropzone{
      border:1.5px dashed #cbd5e1;
      border-radius:16px; padding:22px; cursor:pointer;
      transition:background .15s,border-color .15s,transform .08s;
      background:#fafafa;
    }
    .dropzone:hover{background:#f5faff; border-color:#9bb6ff}
    .dropzone.drag{background:#eef6ff; border-color:#80a9ff}
    .dz-title{font-weight:600; margin:0 0 6px}
    .dz-hint{font-size:13px; color:var(--muted); margin:0}
    .file{margin-top:10px; font-size:14px; word-break:break-all}

    .btn{
      margin-top:16px; width:100%;
      background:var(--brand); color:#fff; border:0;
      padding:12px 16px; border-radius:12px; font-size:16px; font-weight:600;
      cursor:pointer; transition:transform .06s, background .15s, opacity .15s;
    }
    .btn:hover{background:var(--brand-600)}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.45; cursor:not-allowed}

    .progress{display:none; text-align:left; margin-top:16px}
    .bar{height:8px; background:#e5e7eb; border-radius:999px; overflow:hidden}
    .fill{height:100%; width:0%; background:var(--brand); transition:width .18s}
    .status{margin:8px 0 0; font-size:14px; color:var(--muted)}
    .done{display:none; margin-top:14px; color:#15803d}
    .download{margin-left:6px}
    @media (max-width:420px){ .card{padding:24px 20px} }
  </style>
</head>
<body>
  <div class="card" id="app">
    <div class="lang">
      <button class="chip" id="switch">EN</button>
    </div>

    <img src="logo.png" alt="NoiseGone" class="logo" />
    <h1 data-i18n="heading">NoiseGone</h1>
    <p class="desc" data-i18n="description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª, –∏ –º—ã —É–¥–∞–ª–∏–º —à—É–º</p>

    <label class="dropzone" id="dropzone" for="file">
      <p class="dz-title" data-i18n="choose">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—É–¥–∏–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å</p>
      <p class="dz-hint" data-i18n="hint">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: WAV, MP3, M4A ¬∑ –¥–æ 50‚ÄØ–ú–ë</p>
      <input type="file" id="file" accept="audio/*" hidden />
      <div class="file" id="filename"></div>
    </label>

    <button class="btn" id="run" data-i18n="button" disabled>–û—á–∏—Å—Ç–∏—Ç—å —à—É–º</button>

    <div class="progress" id="progress">
      <div class="bar"><div class="fill" id="fill"></div></div>
      <div class="status" id="status"></div>
    </div>

    <div class="done" id="done">
      ‚úÖ <span data-i18n="doneText">–®—É–º —É–¥–∞–ª—ë–Ω!</span>
      <a class="download" id="dl" href="#" download>
        ‚¨áÔ∏è <span data-i18n="download">–°–∫–∞—á–∞—Ç—å –æ—á–∏—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª</span>
      </a>
    </div>
  </div>

  <script>
    // –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    const T = {
      ru:{heading:"NoiseGone",description:"–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª, –∏ –º—ã —É–¥–∞–ª–∏–º —à—É–º",
          choose:"–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∞—É–¥–∏–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å",
          hint:"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: WAV, MP3, M4A ¬∑ –¥–æ 50‚ÄØ–ú–ë",
          button:"–û—á–∏—Å—Ç–∏—Ç—å —à—É–º",processing:"–ò–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞‚Ä¶",
          doneText:"–®—É–º —É–¥–∞–ª—ë–Ω!",download:"–°–∫–∞—á–∞—Ç—å –æ—á–∏—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª",switch:"EN"},
      en:{heading:"NoiseGone",description:"Upload an audio file and we'll remove the noise",
          choose:"Drag & drop audio here or click to choose",
          hint:"Supported: WAV, MP3, M4A ¬∑ up to 50 MB",
          button:"Clean noise",processing:"Processing‚Ä¶",
          doneText:"Noise removed!",download:"Download cleaned file",switch:"RU"}
    };
    let lang = "ru", fileObj = null;

    const $ = sel => document.querySelector(sel);
    const els = {
      switch: $('#switch'),
      h:      $('[data-i18n="heading"]'),
      d:      $('[data-i18n="description"]'),
      choose: $('[data-i18n="choose"]'),
      hint:   $('[data-i18n="hint"]'),
      btn:    $('#run'),
      dz:     $('#dropzone'),
      input:  $('#file'),
      name:   $('#filename'),
      prog:   $('#progress'),
      fill:   $('#fill'),
      status: $('#status'),
      done:   $('#done'),
      dl:     $('#dl'),
      doneText: $('[data-i18n="doneText"]'),
      downloadText: $('[data-i18n="download"]')
    };

    function setLang(){
      const L=T[lang];
      document.documentElement.lang=lang;
      els.switch.textContent=L.switch;
      els.h.textContent=L.heading;
      els.d.textContent=L.description;
      els.choose.textContent=L.choose;
      els.hint.textContent=L.hint;
      els.btn.textContent=L.button;
      if(els.prog.style.display!=="none") els.status.textContent=L.processing;
      if(els.done.style.display!=="none"){
        els.doneText.textContent=L.doneText;
        els.downloadText.textContent=L.download;
      }
    }
    els.switch.addEventListener('click',()=>{lang=lang==='ru'?'en':'ru';setLang();});

    // –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
    els.input.addEventListener('change',()=>{
      if(!els.input.files.length) return;
      fileObj = els.input.files[0];
      els.name.textContent = "üìé " + fileObj.name;
      els.btn.disabled = false;
      els.done.style.display = "none";
    });

    // drag&drop
    ["dragenter","dragover"].forEach(e=>{
      els.dz.addEventListener(e,(ev)=>{ev.preventDefault(); ev.stopPropagation(); els.dz.classList.add('drag');});
    });
    ["dragleave","drop"].forEach(e=>{
      els.dz.addEventListener(e,(ev)=>{ev.preventDefault(); ev.stopPropagation(); els.dz.classList.remove('drag');});
    });
    els.dz.addEventListener('drop',(ev)=>{
      const f = ev.dataTransfer.files?.[0];
      if(!f) return;
      fileObj = f;
      els.input.files = ev.dataTransfer.files;
      els.name.textContent = "üìé " + f.name;
      els.btn.disabled = false;
      els.done.style.display = "none";
    });
    els.dz.addEventListener('click',()=>els.input.click());

    // –∏–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    els.btn.addEventListener('click',()=>{
      if(!fileObj) return;
      els.btn.disabled = true;
      els.prog.style.display = "block";
      els.done.style.display = "none";
      els.fill.style.width = "0%";
      els.status.textContent = T[lang].processing;

      let p=0;
      const t=setInterval(()=>{
        p += 4 + Math.random()*6;
        if(p>=100){ p=100; clearInterval(t); finish(); }
        els.fill.style.width = p + "%";
      },90);
    });

    function finish(){
      els.prog.style.display="none";
      els.done.style.display="block";
      const L=T[lang]; els.doneText.textContent=L.doneText; els.downloadText.textContent=L.download;

      // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ ‚Äî —Å–∫–∞—á–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫ –ø–æ–¥ –Ω–æ–≤—ã–º –∏–º–µ–Ω–µ–º.
      const url = URL.createObjectURL(fileObj);
      const base = fileObj.name.replace(/(\.[^.]+)?$/,'');
      const ext  = (fileObj.name.match(/\.[^.]+$/)||['.wav'])[0];
      els.dl.href = url; els.dl.download = `${base}_cleaned${ext}`;

      // –†–∞–∑—Ä–µ—à–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
      els.btn.disabled = false;
    }

    setLang();
  </script>
</body>
</html>

